<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
    <!--<meta charset="UTF-8">-->
    <!--<title>照片墙</title>-->
    <!--<style>-->
        <!--*{-->
            <!--padding: 0;-->
            <!--margin: 0;-->
        <!--}-->
        <!--ul,ol{-->
            <!--list-style: none;-->
        <!--}-->
        <!--a{-->
            <!--text-decoration: none;-->
        <!--}-->
        <!--#container{-->
            <!--width: 660px;-->
            <!--margin: 0 auto;-->
        <!--}-->
        <!--#container img{-->
            <!--width: 200px;-->
            <!--height: 150px;-->
            <!--margin: 10px;-->
            <!--float: left;-->
            <!--cursor: pointer;-->
        <!--}-->
    <!--</style>-->
<!--</head>-->
<!--<body>-->
    <!--<div id="container">-->
        <!--<img src="照片墙/1.jpg" alt="">-->
        <!--<img src="照片墙/2.jpg" alt="">-->
        <!--<img src="照片墙/3.jpg" alt="">-->
        <!--<img src="照片墙/4.jpg" alt="">-->
        <!--<img src="照片墙/5.jpg" alt="">-->
        <!--<img src="照片墙/6.jpg" alt="">-->
        <!--<img src="照片墙/7.jpg" alt="">-->
        <!--<img src="照片墙/8.jpg" alt="">-->
        <!--<img src="照片墙/9.jpg" alt="">-->
    <!--</div>-->


    <!--<script src="jslib.js"></script>-->
    <!--<script>-->
        <!--/*-->
        <!--* 1.布局  float &ndash;&gt; 定位-->
        <!--*/-->
        <!--var oContainer = document.getElementById('container');-->
<!--//        console.log(oContainer);-->
        <!--var aImg = oContainer.getElementsByTagName('img');-->
<!--//        console.log(aImg);-->
        <!--var zIndex = 1;-->
        <!--var collde = [];-->

        <!--for(var i=0; i<aImg.length; i++){-->
<!--//            aImg[i].position = 'absolute';-->
            <!--aImg[i].style.left = aImg[i].offsetLeft + 'px';-->
            <!--aImg[i].style.top = aImg[i].offsetTop + 'px';-->
        <!--}-->


        <!--for(var i=0; i<aImg.length; i++){-->
            <!--aImg[i].position = 'absolute';-->
<!--//            aImg[i].style.margin = 0;-->
            <!--drag(aImg[i]);-->
        <!--}-->


        <!--function drag(elem){-->
            <!--elem.onmousedown = function(e){-->
                <!--console.log(1);-->
                <!--e = e || window.event;-->
                <!--var iDisX = e.clientX - elem.offsetLeft;-->
                <!--var iDisY = e.clientY - elem.offsetTop;-->

                <!--document.onmousemove = function(e){-->
                    <!--console.log(2);-->
                    <!--e = e || window.event;-->

                    <!--var iLeft = e.clientX - iDisX;-->
                    <!--var iTop = e.clientY - iDisY;-->

                    <!--elem.style.left = iLeft + 'px';-->
                    <!--elem.style.top = iTop + 'px';-->
                    <!--elem.style.zIndex = zIndex++;-->
                    <!--collde = [];-->
                    <!--/*  碰撞检测*/-->
                    <!--for(var i=0; i<aImg.length; i++){-->
                        <!--if(aImg[i] == elem){-->
                            <!--continue;-->
                        <!--}-->
                        <!--var isCol = checkCollde(elem,aImg[i]);-->
                        <!--if(isCol){-->
                            <!--collde.push(aImg[i]);-->
                        <!--}else{-->

                        <!--}-->
                    <!--}-->
                    <!--console.log(collde);-->



                    <!--/*  阻止默认行为  */-->
<!--//                    return false;-->
                <!--};-->

                <!--document.onmouseup = function(e){-->
                    <!--e = e || window.event;-->
                    <!--console.log(3);-->
                    <!--document.onmousemove = null;-->
                <!--};-->
            <!--};-->
        <!--}-->

        <!--//碰撞检测-->
        <!--/*-->
        <!--* elem : 拖拽元素-->
        <!--* target : 碰撞目标元素-->
        <!--* return true or false-->
        <!--*-->
        <!--* */-->
        <!--function checkCollde(elem,target){-->

            <!--var elemL = elem.offsetLeft,-->
                    <!--elemR = elemL + elem.offsetWidth,-->
                    <!--elemT = elem.offsetTop,-->
                    <!--elemB = elemT + elem.offsetHeight;-->
            <!--var targetL = target.offsetLeft,-->
                    <!--targetR = targetL + target.offsetWidth,-->
                    <!--targetT = target.offsetTop,-->
                    <!--targetB = targetT + target.offsetHeight;-->
            <!--if(elemR < targetL || elemB < targetT || elemT > targetB || elemL > targetR){-->
                <!--//没碰撞上-->
                <!--return false;-->
            <!--}else{-->
                <!--//碰撞上了-->

                <!--return true;-->
            <!--}-->

        <!--}-->
    <!--</script>-->
<!--</body>-->
<!--</html>-->



<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>照片墙</title>
</head>


<style>
    *{
        padding: 0;
        margin: 0;
    }
    ul,ol{
        list-style: none;
    }
    a{
        text-decoration: none;
    }
    #container{
        width: 660px;
        margin: 0 auto;
    }
    #container img{
        width: 200px;
        height: 150px;
        margin: 10px;
        float: left;
        cursor: pointer;
    }
</style>

<body>
<div id="container">
    <img src="照片墙/1.jpg" alt="">
    <img src="照片墙/2.jpg" alt="">
    <img src="照片墙/3.jpg" alt="">
    <img src="照片墙/4.jpg" alt="">
    <img src="照片墙/5.jpg" alt="">
    <img src="照片墙/6.jpg" alt="">
    <img src="照片墙/7.jpg" alt="">
    <img src="照片墙/8.jpg" alt="">
    <img src="照片墙/9.jpg" alt="">
</div>

<script src="jslib.js"></script>

<script>
    var oContainer = document.getElementById('container');
//    console.log(oContainer);
    var aImg = oContainer.getElementsByTagName('img');
//    console.log(aImg);
    var zIndex = 1;
    var aImages = [];


    //给每个图片定位
    /*
    * 先采用float浮动css层叠,加载完成之后再用定位层叠
    *
    * */
    for(var i=0; i<aImg.length; i++){
//        aImg[i].style.position = 'absolute';
        aImg[i].style.left = aImg[i].offsetLeft + 'px';
        aImg[i].style.top = aImg[i].offsetTop + 'px';
//        aImg[i].style.float = '';
    }
    for(var i=0; i<aImg.length; i++){
        aImg[i].style.position = 'absolute';
        aImg[i].style.margin = '0';
        drag(aImg[i]);
    }




    //获取拖拽图片的坐标,并更改图片位置到拖拽的位置
    function drag(elem){
        elem.onmousedown = function(e){
            //兼容性选择,IE浏览器使用e,标准浏览器使用window.event.
            e = e || window.event;
            var iDisX = e.clientX - elem.offsetLeft;
            var iDisY = e.clientY - elem.offsetTop;

            document.onmousemove = function(e){
                e = e || window.event;
                var iDisAX = e.clientX - iDisX;
                var iDisAY = e.clientY - iDisY;
                elem.style.left = iDisAX + 'px';
                elem.style.top = iDisAY + 'px';
                elem.style.zIndex = zIndex++;
//                console.log(elem.offsetLeft);
//                console.log(elem.offsetTop);

                //碰撞检测
                aImgages = [];
                for(var i=0; i<aImg.length; i++){
                    if(aImg[i] == elem){
                        continue;
                    }
//                    console.log(elem);
//                    console.log(aImg[i]);
                    var isCol = checkCollide(elem,aImg[i]);
                    //若碰撞上,就将aImg[i]加入到aImages数组里面
                    if(isCol){
                        aImages.push(aImg[i]);
                    }
                }
//                console.log(aImages);


            };

            document.onmouseup = function(e){
                document.onomusemove = null;
            }
        }
    }



    //碰撞检测函数
    function checkCollide(elem,target){
        var eLeft = elem.offsetLeft,
                eTop = elem.offsetTop,
                eBottom = eTop + elem.offsetHeight,
                eRight = eLeft + elem.offsetWidth;
        var tLeft = target.offsetLeft,
                tTop = target.offsetTop,
                tBottom = tTop + elem.offsetHeight,
                tRight = tLeft + elem.offsetWidth;
        if(eRight > tLeft || eBottom > tTop || tRight > eLeft || tBottom > eTop){
            console.log('撞上');
            return true;
        }else{
            console.log('没撞上');
            return false;
        }
    }

</script>

</body>
</html>